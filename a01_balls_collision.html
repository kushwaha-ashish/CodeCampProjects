<!DOCTYPE html>
<html>

<head>
    <title>YourFavModels</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Unica+One" rel="stylesheet">
</head>

<style>

body {
	width: 80%;
	margin: auto;
	font-family: 'Quicksand', sans-serif;
}

#logo {
	font-family: 'Unica One', cursive;
	font-weight: bold;
}

#container {
  width: 600px;
  height: 400px;
  position: relative;
  background: yellow;
}
#animate1 {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  position: absolute;
  background-color: blue;
}

#animate2 {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  position: absolute;
  background-color: red;
}

</style>
<body>
  <header>
    <h1 id="logo">Your Favorite Models</h1>
    <hr>
  </header>

<p><button onclick="myMove()">Click Me</button></p> 

<div id ="container">
  <div id ="animate1"></div>
  <div id ="animate2"></div>
</div>

<script>
  //Radii
  const r1 = 20;
  const r2 = 40;
  
  //Masses
  const m1 = 10;
  const m2 = 50;

  //Initial positions of the centers
  var c1_x = 105;
  var c1_y = 200;

  var c2_x = 100;
  var c2_y = 100;

  //function to find the absolute angle of contact
  function angleOfContact(c1_x, c2_x, c1_y, c2_y) {
    var tan_inv = Math.atan((c2_y - c1_y)/(c2_x - c1_x));

    if (c2_x > c1_x) {return (tan_inv);}
    else {
      if (c2_y >= c1_y) {return (Math.PI + tan_inv);}
      else {return (-Math.PI + tan_inv);}
    }
  }

  function absoluteAngle(x_ord, y_ord) {
    var theta_rel = Math.atan(y_ord/x_ord);
    
    if (x_ord == 0) {
      if (y_ord > 0) {return (Math.PI/2);}
      else {return (-Math.PI/2);}
    }

    else {
      if (x_ord > 0) {return theta_rel;}
      else {
        if (y_ord > 0) {return (Math.PI + theta_rel);}
        else {return (-Math.PI + theta_rel);}
      }
    }
  }

  function postCollisionVelocities(m1, m2, c1_x, c1_y, c2_x, c2_y, v1x, v1y, v2x, v2y) {
    //angle of contact
    var alpha = angleOfContact(c1_x, c2_x, c1_y, c2_y);

    //directions of velocities
    var theta_1 = absoluteAngle(v1x, v1y);
    var theta_2 = absoluteAngle(v2x, v2y);

    //angle between the velocity vectors and angle of contacts
    var beta_1 = theta_1 - alpha;
    var beta_2 = theta_2 - alpha;

    //initial velocities mags
    var v1 = Math.sqrt(v1x**2 + v1y**2);
    var v2 = Math.sqrt(v2x**2 + v2y**2);

    //velocity components
    var v1_impactDirection = v1*Math.cos(beta_1);
    var v1_impactTangent = v1*Math.sin(beta_1);
    var v2_impactDirection = v2*Math.cos(beta_2);
    var v2_impactTangent = v2*Math.sin(beta_2);

    //final velocities
    var v1f_impactDirection = ((m1 - m2)/(m1 + m2))*v1_impactDirection + ((2*m2)/(m1 + m2))*v2_impactDirection;
    var v1f_impactTangent = v1_impactTangent;
    var v2f_impactDirection = ((2*m1)/(m1 + m2))*v1_impactDirection + ((m2 - m1)/(m1 + m2))*v2_impactDirection;
    var v2f_impactTangent = v2_impactTangent;

    //final velocities components in standard coordinates
    var v1fx = v1f_impactDirection*Math.cos(alpha) - v1_impactTangent*Math.sin(alpha);
    var v1fy = v1f_impactDirection*Math.sin(alpha) + v1_impactTangent*Math.cos(alpha);
    var v2fx = v2f_impactDirection*Math.cos(alpha) - v2_impactTangent*Math.sin(alpha);
    var v2fy = v2f_impactDirection*Math.sin(alpha) + v2_impactTangent*Math.cos(alpha);

    return ([v1fx, v1fy, v2fx, v2fy]);
  }

  function myMove() {
    var elem1 = document.getElementById("animate1");
    var elem2 = document.getElementById("animate2");
    
    //initial acceleration vectors
    var a1x = 0;
    var a1y = 0;
    var a2x = 0;
    var a2y = 0;
    
    //initial velocity vectors
    var v1x = 0;
    var v1y = 1;
    var v2x = 0;
    var v2y = -1;

    //force constants
    const a = 1;

    //position derivative = velocity
    var dx1dt = v1x;
    var dy1dt = v1y;
    var dx2dt = v2x;
    var dy2dt = v2y;

  /*  var r12_sqr = (c1_x - c2_x)**2 + (c1_y - c2_y)**2;
    var force_12 = a*m1*m2;
    var a1 = force_12/m1;
    var a2 = force_12/m2;
  */
    var id = setInterval(frame, 5);

    function frame() {
      //boundary conditions
      if ((c1_x <= r1)|(c1_x >= (600 - r1))) {dx1dt = -dx1dt;}
      if ((c1_y <= r1)|(c1_y >= (400 - r1))) {dy1dt = -dy1dt;}

      if ((c2_x <= r2)|(c2_x >= (600 - r2))) {dx2dt = -dx2dt;}
      if ((c2_y <= r2)|(c2_y >= (400 - r2))) {dy2dt = -dy2dt;}

      //distance between the centers
      var r12_sqr = (c1_x - c2_x)**2 + (c1_y - c2_y)**2;
      //collision
      if (r12_sqr <= (r1 + r2)**2) {
        //final velocities
        var finalVel = postCollisionVelocities(m1, m2, c1_x, c1_y, c2_x, c2_y, dx1dt, dy1dt, dx2dt, dy2dt);
        dx1dt = finalVel[0];
        dy1dt = finalVel[1];
        dx2dt = finalVel[2];
        dy2dt = finalVel[3];
      }

      c1_x = c1_x + dx1dt;
      c1_y = c1_y + dy1dt;

      c2_x = c2_x + dx2dt;
      c2_y = c2_y + dy2dt;

      elem1.style.top = (c1_y - r1) + "px"; 
      elem1.style.left = (c1_x - r1) + "px"; 

      elem2.style.top = (c2_y - r2) + "px"; 
      elem2.style.left = (c2_x - r2) + "px";
    }
  }
</script>

</body>
</html>